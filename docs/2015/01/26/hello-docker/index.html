<!doctype HTML>
<html lang="en">
<head>
    <title>New packages deploy CAL-ACCESS apps with Docker, Chef</title>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" type="image/png" href="//www.californiacivicdata.org/favicon.png">

<link type="text/css" rel="stylesheet" href="/css/bootstrap.min.css">

<link rel="stylesheet" type="text/css" href="//calaccess.californiacivicdata.org/static/calaccess_website/css/sourcesanspro.css">
<link rel="stylesheet" type="text/css" href="//calaccess.californiacivicdata.org/static/calaccess_website/css/main.css?foobar">

<link type="text/css" rel="stylesheet" href="/css/font-awesome.min.css">
<link href="//fonts.googleapis.com/css?family=Raleway:400,600" rel="stylesheet">
<link type="text/css" rel="stylesheet" href="/css/blog.css">

<script type="text/javascript" src="/js/jquery.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.js"></script>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55129934-1', 'auto');
  ga('send', 'pageview');

</script>

    <meta name="date" content="2015-01-26 00:00:00 +0000" />

    <meta property="og:site_name" content="www.californiacivicdata.org"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="New packages deploy CAL-ACCESS apps with Docker, Chef"/>
    <meta property="og:image" content="http://calaccess.californiacivicdata.org/static/calaccess_website/images/brown-bear-share.png"/>
    <meta property="og:description" content="Take a hack at these new tools for spinning up our stack"/>

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:image:src" content="http://calaccess.californiacivicdata.org/static/calaccess_website/images/brown-bear-share.png">
    <meta property="twitter:site" content="@latimes">
    <meta property="twitter:title" content="New packages deploy CAL-ACCESS apps with Docker, Chef">
    <meta property="twitter:description" content="Take a hack at these new tools for spinning up our stack"/>
    <meta property="twitter:image" content="http://calaccess.californiacivicdata.org/static/calaccess_website/images/brown-bear-share.png" />
    <link rel="image_src" type="image/jpeg" href="http://calaccess.californiacivicdata.org/static/calaccess_website/images/brown-bear-share.png" />
</head>
<body>
    <header>
  <nav class="container">
    <div class="row">
    <div class="col-md-12">
      <ul class="nav nav-pills">
        <li class="visible-lg-inline visible-md-inline visible-sm-inline invisible-xs-inline" style="margin-left:0;">
            <a class="logo" href="https://www.californiacivicdata.org/">
                <img
                    src="//calaccess.californiacivicdata.org/static/calaccess_website/images/brown-geobear.svg"
                    alt="California Civic Data Coalition logo"
                    title="Home"
                >
            </a>
        </li>
        <li id="home"><a href="/">HOME</a></li>
        <li id="data"><a href="https://calaccess.californiacivicdata.org/downloads/latest/">DATA</a></li>
        <li id="docs"><a href="https://calaccess.californiacivicdata.org/documentation/">DOCS</a></li>
        <li id="blog"><a href="/archive/">BLOG</a></li>
        <li id="about"><a href="/about/">ABOUT</a></li>
      </ul>
    </div>
    </div>
  </nav>
</header>

<script type="text/javascript">
    var url = window.location;
    // Will only work if string in href matches with location
    $('ul.nav a[href="' + url + '"]').parent().addClass('active');
    // Will also work for relative and absolute hrefs
    $('ul.nav a').filter(function() {
        return this.href == url;
    }).parent().addClass('active');
    $("#small-icon").css("cursor", "pointer");
    $("#small-icon").click(function () {
        window.location = '/';
    });
</script>

    <article>
    <div class="bg-red">
        <div class="container">
            <div class="row">
                <nav class="col-md-9">
                    <ol class="breadcrumb">
                        <li><a href="/">Home</a></li>
                        <li><a href="/archive/">Blog</a></li>
                    </ol>
                </nav>
                <div class="col-md-9">
                    <h1>New packages deploy CAL-ACCESS apps with Docker, Chef</h1>
                    <p>
                        <p>Take a hack at these new tools for spinning up our stack</p>

                    </p>
                    <div class="byline"><p>By <a href="http://palewi.re/who-is-ben-welsh/">Ben Welsh</a></p>
</div>
                <div class="pubdate"><p><time datetime="2015-01-26">January 26, 2015</time></p></div>
                </div>
            </div>
        </div>
    </div>
    <div class="container content">
        <div class="row">
            <div class="post col-lg-8 col-md-10 col-sm-12 col-xs-12">
                <p>This morning we’re releasing a set of open-source packages that aim to make it easier
to deploy <a href="http://www.californiacivicdata.org/2014/09/24/hello-world/">our tools</a> for acquiring and analyzing CAL-ACCESS, the California Secretary of State’s campaign finance database.</p>

<p><strong><a href="https://github.com/california-civic-data-coalition/django-calaccess-project-template">django-calaccess-project-template</a></strong> is a custom template for initializing a preconfigured Django project with our applications already installed and ready to roll.</p>

<p>It works by taking advantage of the underused templating options deep within Django’s <a href="https://docs.djangoproject.com/en/1.7/ref/django-admin/#startproject-projectname-destination"><code class="language-plaintext highlighter-rouge">startproject</code></a> command.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Create a new empty repo</span>
<span class="nv">$ </span>git init repo

<span class="c"># Drop in our project</span>
<span class="nv">$ </span>django-admin.py startproject <span class="nt">--extension</span><span class="o">=</span>py,.gitignore <span class="nt">--template</span><span class="o">=</span>https://github.com/california-civic-data-coalition/django-calaccess-project-template/archive/master.zip project repo</code></pre></figure>

<p><strong><a href="https://github.com/california-civic-data-coalition/django-calaccess-docker">django-calaccess-docker</a></strong> is a Docker image ready to boot a standalone stack that serves a fully-functioning Django project.</p>

<p>To create a container using this image, start by retriving the image from <a href="https://registry.hub.docker.com/u/ccdc/django-calaccess/">Docker Hub</a>.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>docker pull ccdc/django-calaccess:0.6</code></pre></figure>

<p>Then fire up the container with all the required environmental settings included as options.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>docker run <span class="se">\</span>
    <span class="nt">-p</span> 127.0.0.1:80:80 <span class="se">\</span>
    <span class="nt">--name</span> my-calaccess <span class="se">\</span>
    <span class="nt">-e</span> <span class="nv">MYSQL_DATABASE</span><span class="o">=</span>calaccess <span class="se">\</span>
    <span class="nt">-e</span> <span class="nv">MYSQL_USER</span><span class="o">=</span>ccdc <span class="se">\</span>
    <span class="nt">-e</span> <span class="nv">MYSQL_PASSWORD</span><span class="o">=</span>mycrazypassword <span class="se">\</span>
    <span class="nt">-e</span> <span class="nv">DJANGO_USER</span><span class="o">=</span>admin <span class="se">\</span>
    <span class="nt">-e</span> <span class="nv">DJANGO_EMAIL</span><span class="o">=</span>foo@bar.com <span class="se">\</span>
    <span class="nt">-e</span> <span class="nv">DJANGO_PASSWORD</span><span class="o">=</span>mydjangopassword <span class="se">\</span>
    <span class="nt">-d</span> ccdc/django-calaccess:0.6</code></pre></figure>

<p>Once that finishes, visit <a href="http://localhost/">localhost</a> in your browser to see the stack in action. The database will be empty but is set to fill once the daily cron rolls around.</p>

<p><strong><a href="https://github.com/california-civic-data-coalition/django-calaccess-cookbook">django-calaccess-cookbook</a></strong> also serves the full stack by provisioning a server from Amazon Web Services EC2 service with Chef and Fabric.</p>

<p>Once you have the repository installed locally, firing up a working server should be as simple as:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>fab ec2bootstrap</code></pre></figure>

<p>All three projects are experimental and in the early stages of development. The aim is to
make it easier for others to install, explore and improve our code base. But we know
the code isn’t perfect and we want for feedback from hackers like you to make it better. So break it. Please.</p>

            <script type="text/javascript">
                var url = window.location;
                // Will only work if string in href matches with location
                $('ul.nav a[href="/archive/"]').parent().addClass('active');
                // Will also work for relative and absolute hrefs
                $('ul.nav a').filter(function() {
                    return this.href == url;
                }).parent().addClass('active');
                $("#small-icon").css("cursor", "pointer");
                $("#small-icon").click(function () {
                    window.location = '/';
                });
            </script>
            </div>
        </div>
    </div>
    </article>
    <footer class="footer" aria-label="Footer">
  <nav class="container">
    <div class="row icon">
      <a href="http://www.californiacivicdata.org/">
        <img src="//calaccess.californiacivicdata.org/static/calaccess_website/images/white-geobear.svg"
             alt="California Civic Data Coalition logo">
      </a>
    </div>
    <div class="row">
      <section class="col-md-2 col-md-offset-1 col-sm-5 col-sm-offset-1 col-xs-5 col-xs-offset-1">
        <h3>CAL-ACCESS</h3>
        <ul>
            <li><a href="http://calaccess.californiacivicdata.org/downloads/latest/">Latest downloads</a></li>
            <li><a href="http://calaccess.californiacivicdata.org/downloads/">Downloads archive</a></li>
            <li><a href="http://calaccess.californiacivicdata.org/documentation/">Documentation</a></li>
        </ul>
      </section>
      <section class="col-md-2 col-md-offset-1 col-sm-5 col-sm-offset-1 col-xs-4 col-xs-offset-2">
        <h3>Blog</h3>
        <ul>
          <li><a href="http://www.californiacivicdata.org/archive/">All posts</a></li>
          <li><a href="http://www.californiacivicdata.org/archive/latest.xml">RSS</a></li>
        </ul>
      </section>
      <div class="clearfix visible-sm visible-xs"></div>
      <section class="col-md-2 col-md-offset-1 col-sm-5 col-sm-offset-1 col-xs-5 col-xs-offset-1">
        <h3>About</h3>
        <ul>
          <li><a href="https://www.californiacivicdata.org/about/">Our story</a></li>
          <li><a href="https://www.californiacivicdata.org/about/#team">The team</a></li>
          <li><a href="https://www.californiacivicdata.org/about/#events">Events</a></li>
          <li><a href="https://www.californiacivicdata.org/about/#what-others-are-saying">What others are saying</a></li>
        </ul>
      </section>
      <section class="col-md-2 col-md-offset-1 col-sm-5 col-sm-offset-1 col-xs-4 col-xs-offset-2">
        <h3>Contact</h3>
        <ul>
          <li><a href="mailto:cacivicdata@gmail.com">E-mail</a></li>
          <li><a href="https://github.com/california-civic-data-coalition">GitHub</a></li>
          <li><a href="https://newsnerdery.slack.com/archives/C0H8Y2QBD">Slack</a></li>
        </ul>
      </section>
    </div>
    <section class="row xs-left">
      <p>
        &copy; <span class="easteregg"><a href="https://www.youtube.com/watch?v=wPsA3TsK1Uk">2016 'til infinity</a></span>
        <span><a href="https://www.californiacivicdata.org/">California Civic Data Coalition</a>.</span>
        <span><span class="easteregg"><a href="https://en.wikipedia.org/wiki/Gratis_versus_libre">Gratis, libre and fermented</a></span> on <a href="https://github.com/california-civic-data-coalition/">GitHub</a>.</span>
        <span class="easteregg"><a href="https://www.youtube.com/watch?v=wKgGXxoT5Ds">Westside right on time only thing fosho</a>.</span>
      </p>
    </section>
  </nav>
</footer>

</body>
</html>
