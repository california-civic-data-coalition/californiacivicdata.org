<!doctype HTML>
<html lang="en">
<head>
    <title>Package data like software, and the stories will flow like wine</title>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" type="image/png" href="//www.californiacivicdata.org/favicon.png">

<link type="text/css" rel="stylesheet" href="/css/bootstrap.min.css">

<link rel="stylesheet" type="text/css" href="//calaccess.californiacivicdata.org/static/calaccess_website/css/sourcesanspro.css">
<link rel="stylesheet" type="text/css" href="//calaccess.californiacivicdata.org/static/calaccess_website/css/main.css?foobar">

<link type="text/css" rel="stylesheet" href="/css/font-awesome.min.css">
<link href="//fonts.googleapis.com/css?family=Raleway:400,600" rel="stylesheet">
<link type="text/css" rel="stylesheet" href="/css/blog.css">

<script type="text/javascript" src="/js/jquery.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.js"></script>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55129934-1', 'auto');
  ga('send', 'pageview');

</script>

    <meta name="date" content="2014-09-24 00:00:00 +0000" />

    <meta property="og:site_name" content="www.californiacivicdata.org"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Package data like software, and the stories will flow like wine"/>
    <meta property="og:image" content="http://calaccess.californiacivicdata.org/static/calaccess_website/images/brown-bear-share.png"/>
    <meta property="og:description" content="A humble suggestion from your friends at the California Civic Data Coalition"/>

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:image:src" content="http://calaccess.californiacivicdata.org/static/calaccess_website/images/brown-bear-share.png">
    <meta property="twitter:site" content="@latimes">
    <meta property="twitter:title" content="Package data like software, and the stories will flow like wine">
    <meta property="twitter:description" content="A humble suggestion from your friends at the California Civic Data Coalition"/>
    <meta property="twitter:image" content="http://calaccess.californiacivicdata.org/static/calaccess_website/images/brown-bear-share.png" />
    <link rel="image_src" type="image/jpeg" href="http://calaccess.californiacivicdata.org/static/calaccess_website/images/brown-bear-share.png" />
</head>
<body>
    <header>
  <nav class="container">
    <div class="row">
    <div class="col-md-12">
      <ul class="nav nav-pills">
        <li class="visible-lg-inline visible-md-inline visible-sm-inline invisible-xs-inline" style="margin-left:0;">
            <a class="logo" href="https://www.californiacivicdata.org/">
                <img
                    src="//calaccess.californiacivicdata.org/static/calaccess_website/images/brown-geobear.svg"
                    alt="California Civic Data Coalition logo"
                    title="Home"
                >
            </a>
        </li>
        <li id="home"><a href="/">HOME</a></li>
        <li id="data"><a href="https://calaccess.californiacivicdata.org/downloads/latest/">DATA</a></li>
        <li id="docs"><a href="https://calaccess.californiacivicdata.org/documentation/">DOCS</a></li>
        <li id="blog"><a href="/archive/">BLOG</a></li>
        <li id="about"><a href="/about/">ABOUT</a></li>
      </ul>
    </div>
    </div>
  </nav>
</header>

<script type="text/javascript">
    var url = window.location;
    // Will only work if string in href matches with location
    $('ul.nav a[href="' + url + '"]').parent().addClass('active');
    // Will also work for relative and absolute hrefs
    $('ul.nav a').filter(function() {
        return this.href == url;
    }).parent().addClass('active');
    $("#small-icon").css("cursor", "pointer");
    $("#small-icon").click(function () {
        window.location = '/';
    });
</script>

    <article>
    <div class="bg-red">
        <div class="container">
            <div class="row">
                <nav class="col-md-9">
                    <ol class="breadcrumb">
                        <li><a href="/">Home</a></li>
                        <li><a href="/archive/">Blog</a></li>
                    </ol>
                </nav>
                <div class="col-md-9">
                    <h1>Package data like software, and the stories will flow like wine</h1>
                    <p>
                        <p>A humble suggestion from your friends at the California Civic Data Coalition</p>

                    </p>
                    <div class="byline"><p>By <a href="http://palewi.re/who-is-ben-welsh/">Ben Welsh</a>, <a href="http://www.twitter.com/agustin_NYT">Agustin Armendariz</a> and <a href="http://aboutaaron.com">Aaron Williams</a></p>
</div>
                <div class="pubdate"><p><time datetime="2014-09-24">September 24, 2014</time></p></div>
                </div>
            </div>
        </div>
    </div>
    <div class="container content">
        <div class="row">
            <div class="post col-lg-8 col-md-10 col-sm-12 col-xs-12">
                <p>The melodrama is so familiar it’s mundane. The government is asked to release an important dataset. They dither. We moan. We groan. Sometimes we sue, or even (gasp) organize. More and more, our pushback works. They make good and release the raw data, maybe even posting it online.</p>

<p>Next comes the tedious downloading, extracting, transforming, cleaning and exploring necessary before the creative work can begin. By the time we write the story, build the application or design the graphic, we’re mentally spent, eager to move on to the next project.</p>

<p>The pathetic result: All of the valuable work that prepared the data for analysis is discarded or kept locked away. Every newcomer must reinvent virtually identical tools simply to get started.</p>

<p>This must change. It’s a wasteful exercise so behind the times that even broadsheet newspaper reporters, a faction with revanchist delusions on par with the Putin administration, <a href="http://www.nytimes.com/2014/08/18/technology/for-big-data-scientists-hurdle-to-insights-is-janitor-work.html?_r=0">see the problem</a>.</p>

<p>Open-data hackers should heed the words of <a href="http://daguar.github.io/2014/03/17/etl-for-america/">Dave Guarino</a> and work together to improve the pipeline that prepares data for meaningful analysis, crucial but unglamourous “plumbing” often overlooked in the rush to build the latest flashy user interface.</p>

<p>We’re here to demonstrate a way to make it happen. We call it “pluggable data.”</p>

<h3 id="what-we-mean">What we mean</h3>

<p>If you have any experience as a developer, you’ve probably bumped into packaged 
software. Thousands of free and open-source libraries, typically unique to each 
programming language, are available for installation over the web from centralized servers. Command-line tools like <a href="http://pip.readthedocs.org/en/latest/index.html"><code class="language-plaintext highlighter-rouge">pip</code></a> (Python), <a href="https://rubygems.org/"><code class="language-plaintext highlighter-rouge">gem</code></a> (Ruby), <a href="http://www.cpan.org/"><code class="language-plaintext highlighter-rouge">CPAN</code></a> (Perl) and <a href="https://www.npmjs.org/"><code class="language-plaintext highlighter-rouge">npm</code></a> (NodeJS) can make it easy to do.</p>

<p>For instance, if you are a Python developer interested in trying out the <a href="http://docs.python-requests.org/en/latest/"><code class="language-plaintext highlighter-rouge">requests</code></a> library, installing it on your laptop is as easy as:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pip <span class="nb">install </span>requests</code></pre></figure>

<p>And now using it is only a import away.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">requests</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"http://www.californiacivicdata.org/"</span><span class="p">).</span><span class="n">status_code</span>
<span class="mi">200</span></code></pre></figure>

<p>The concept has been expanded by <a href="http://en.wikipedia.org/wiki/Web_application_framework">web frameworks</a> like <a href="http://www.djangoproject.com/">Django</a> to package not just freestanding utilities like <code class="language-plaintext highlighter-rouge">requests</code>, but entire applications that can be dropped into the framework’s rigid system and <a href="https://www.youtube.com/watch?v=qmPq00jelpc">“just work.”</a></p>

<p>This approach, <a href="http://www.b-list.org/weblog/2007/nov/29/django-blog/">championed</a> <a href="https://www.youtube.com/watch?v=A-S0tqpPga4">eloquently</a> by Django leaders like James Bennett, is sometimes called “pluggable” or <a href="https://docs.djangoproject.com/en/dev/intro/reusable-apps/">“reusable”</a>, because its modular design makes it portable to a wide range of sites.</p>

<p>A good example is the <a href="http://pinaxproject.com/">Pinax project</a>, which provides Django-ready components that furnish common features like <a href="https://github.com/eldarion/dialogos">comments</a>, <a href="https://github.com/eldarion/brabeion">badges</a>, <a href="https://github.com/pinax/pinax-phone-confirmation">phone confirmations</a> and <a href="https://github.com/pinax/django-user-accounts">user accounts</a>. Each contains code that builds database tables, configures administration panels and spells out application logic that can interact with users.</p>

<p>Our proposal is to bring the same approach to packaging data. If a series of simple installation commands can provide a Django application with everything necessary to build a social networking site, why can’t it also provide <a href="http://factfinder2.census.gov/faces/nav/jsf/pages/download_center.xhtml">U.S. Census statistics</a>, <a href="http://www2.epa.gov/toxics-release-inventory-tri-program/tri-basic-data-files-calendar-years-1987-2012">the massive federal database that tracks our country’s chemical polluters</a> or something as simple as <a href="http://www.epa.gov/envirofw/html/codes/state.html">a list of every U.S. county</a>?</p>

<h3 id="how-we-do">How we do</h3>

<p>With that idea in mind, a small group of programmers from the <a href="http://www.latimes.com/local/datadesk/">Los Angeles Times Data Desk</a>, <a href="http://cironline.org/">The Center for Investigative Reporting</a> and Stanford’s new <a href="http://towcenter.org/blog/data-journalist-profile-cheryl-phillips-stanford-data-journalism/">Computational Journalism Program</a> met for two days last month at Mozilla offices in San Francisco.</p>

<p>Under the newly minted banner of the California Civic Data Coalition, we set out to package and refine <a href="http://www.sos.ca.gov/prd/cal-access/">raw data from CAL-ACCESS</a>, the state of California’s campaign finance and lobbying activity database.</p>

<p>Thanks to a <a href="http://maplight.org/content/73249">successful organizing effort</a> last year, Secretary of State Debra Bowen <a href="http://www.sos.ca.gov/admin/press-releases/2013/db13-035.htm">committed</a> to posting a nearly complete dump of the data online, updating it on a regular basis.</p>

<p>Weighing in at more than 650 megabytes, it contains 76 database tables and nearly 35 million records.</p>

<p>In the past, slices were only released on demand, for a small fee, <a href="/img/calaccess-cd.png">via compact disc</a>. Analysts, including one of the authors of this post, have spent months learning how to negotiate the system’s contours, overcome its quirks and <a href="http://cironline.org/reports/california-speaker-gives-assemblys-juiciest-jobs-biggest-fundraisers-4501">grind out a story</a>—only to abandon all of the code that made it happen when they moved on to the next topic.</p>

<p>Now that the dump is freely available and open to all, it offers an opportunity to pool efforts. Even though we represent rival media outlets, we’d rather compete at analyzing the data than downloading and parsing it. And we believe that the nature of open development will encourage us to write better code and documentation.</p>

<p>Today we’re ready to announce the release of <code class="language-plaintext highlighter-rouge">django-calaccess-raw-data</code>, our first pluggable Django dataset, <a href="https://github.com/california-civic-data-coalition/django-calaccess-raw-data">hosted on GitHub</a> and distributed via <a href="https://pypi.python.org/pypi/django-calaccess-raw-data/">the Python Package Index</a>. With a few simple commands, you can download the data, transform it into clean CSV files and then load it into a MySQL database.</p>

<p>Assuming you have <a href="https://docs.djangoproject.com/en/1.6/intro/tutorial01/">a basic Django project</a> already configured, here’s all it takes. First, install the pluggable application from the Python package repository.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pip <span class="nb">install </span>django-calaccess-raw-data</code></pre></figure>

<p>Add it to the <code class="language-plaintext highlighter-rouge">INSTALLED_APPS</code> list in Django’s standard <code class="language-plaintext highlighter-rouge">settings.py</code> file, as you would any other application.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="c1"># ... other apps up here ...
</span>    <span class="s">'calaccess_raw'</span><span class="p">,</span>
<span class="p">)</span></code></pre></figure>

<p>Make sure that your MySQL installation can use the brutally effective, and 
tragically underused, <a href="http://dev.mysql.com/doc/refman/5.1/en/load-data.html"><code class="language-plaintext highlighter-rouge">LOAD DATA INFILE</code></a>
command by adding the following to the database configuration also found in <code class="language-plaintext highlighter-rouge">settings.py</code>.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'default'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'ENGINE'</span><span class="p">:</span> <span class="s">'django.db.backends.mysql'</span><span class="p">,</span>
        <span class="s">'NAME'</span><span class="p">:</span> <span class="s">'my_calaccess_db'</span><span class="p">,</span>
        <span class="s">'USER'</span><span class="p">:</span> <span class="s">'username'</span><span class="p">,</span>
        <span class="s">'PASSWORD'</span><span class="p">:</span> <span class="s">'password'</span><span class="p">,</span>
        <span class="s">'HOST'</span><span class="p">:</span> <span class="s">'localhost'</span><span class="p">,</span>
        <span class="s">'PORT'</span><span class="p">:</span> <span class="s">'3306'</span><span class="p">,</span>
        <span class="c1"># Here's the thing we're talking about
</span>        <span class="s">'OPTIONS'</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">'local_infile'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>In the same file, shut off Django’s safety valve so <code class="language-plaintext highlighter-rouge">LOAD DATA INFILE</code> can run wild.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">DEBUG</span> <span class="o">=</span> <span class="bp">False</span></code></pre></figure>

<p>Sync your database to create the CAL-ACCESS tables.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>python manage.py syncdb</code></pre></figure>

<p>And, finally, run the custom management command that will download, parse, clean and load all of the data.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>python manage.py downloadcalaccessrawdata</code></pre></figure>

<p>That’s it. You now have the state’s full database, including a set of administration panels.</p>

<p>You could use it to track the millions of dollars flowing into this November’s governor’s race, investigate what lobbyists are up to this session at the statehouse or impress everyone by designing a sophisticated analysis that stretches back over the nearly 15 years of data in the system to quantify the influence of money in California politics.</p>

<p>Of course, to do any of that, you’ll need to further regroup, filter and refine the data. But at least the initial headaches are out of the way, and any work you build on top of our application could be packaged and distributed in the exact same way.</p>

<p>In that scheme, our raw data application is simply one of your new package’s dependencies, much in the same way that the <code class="language-plaintext highlighter-rouge">requests</code> library we installed earlier depends on components of <a href="http://urllib3.readthedocs.org/en/latest/"><code class="language-plaintext highlighter-rouge">urllib3</code></a>.</p>

<p>An example is already taking shape in the <a href="https://github.com/california-civic-data-coalition/django-calaccess-campaign-browser"><code class="language-plaintext highlighter-rouge">django-calaccess-campaign-browser</code></a> repository, where our team is experimenting with a set of further-refined tables and a simple web application for exploring campaign filings aimed at power users, like statehouse reporters and newsroom analysts, who want a more flexible interface than the <a href="http://dbsearch.ss.ca.gov/ContributorSearch.aspx">helpful but fundamentally limited</a> closed-source sites that are now the only way to interact with this database online.</p>

<h3 id="where-you-come-in">Where you come in</h3>

<p>If you are interested in this effort and would like to contribute, here’s how you can help today.</p>

<ol>
  <li>Download and install <a href="https://github.com/california-civic-data-coalition/django-calaccess-raw-data"><code class="language-plaintext highlighter-rouge">django-calaccess-raw-data</code></a> or <a href="https://github.com/california-civic-data-coalition/django-calaccess-campaign-browser"><code class="language-plaintext highlighter-rouge">django-calaccess-campaign-browser</code></a>. Report bugs.</li>
  <li>Fork our code and try to close one of the <a href="https://github.com/california-civic-data-coalition/django-calaccess-raw-data/issues">many</a> <a href="https://github.com/california-civic-data-coalition/django-calaccess-campaign-browser/issues">tickets</a> we’ve filed. If you’re knowledgable about how CAL-ACCESS works, we need your help!</li>
  <li>Try to package and distribute an open data set you’ve worked with. If you write Python, the <a href="https://docs.djangoproject.com/en/dev/intro/reusable-apps/">Django documentation</a> and <a href="http://www.scotttorborg.com/python-packaging/minimal.html">Scott Torborg</a> have excellent tutorials that can introduce you to the process.</li>
</ol>

<p>If nothing else, <a href="https://www.youtube.com/watch?v=A-S0tqpPga4">watch James Bennett’s excellent 2008 talk</a> on designing reusable applications and ask yourself, every time you start a new project, how you could package it for future reuse. It’s a simple but powerful approach that has multiplied the reach and reuse of open source, and we hope can do the same for open data.</p>

            <script type="text/javascript">
                var url = window.location;
                // Will only work if string in href matches with location
                $('ul.nav a[href="/archive/"]').parent().addClass('active');
                // Will also work for relative and absolute hrefs
                $('ul.nav a').filter(function() {
                    return this.href == url;
                }).parent().addClass('active');
                $("#small-icon").css("cursor", "pointer");
                $("#small-icon").click(function () {
                    window.location = '/';
                });
            </script>
            </div>
        </div>
    </div>
    </article>
    <footer class="footer" aria-label="Footer">
  <nav class="container">
    <div class="row icon">
      <a href="http://www.californiacivicdata.org/">
        <img src="//calaccess.californiacivicdata.org/static/calaccess_website/images/white-geobear.svg"
             alt="California Civic Data Coalition logo">
      </a>
    </div>
    <div class="row">
      <section class="col-md-2 col-md-offset-1 col-sm-5 col-sm-offset-1 col-xs-5 col-xs-offset-1">
        <h3>CAL-ACCESS</h3>
        <ul>
            <li><a href="http://calaccess.californiacivicdata.org/downloads/latest/">Latest downloads</a></li>
            <li><a href="http://calaccess.californiacivicdata.org/downloads/">Downloads archive</a></li>
            <li><a href="http://calaccess.californiacivicdata.org/documentation/">Documentation</a></li>
        </ul>
      </section>
      <section class="col-md-2 col-md-offset-1 col-sm-5 col-sm-offset-1 col-xs-4 col-xs-offset-2">
        <h3>Blog</h3>
        <ul>
          <li><a href="http://www.californiacivicdata.org/archive/">All posts</a></li>
          <li><a href="http://www.californiacivicdata.org/archive/latest.xml">RSS</a></li>
        </ul>
      </section>
      <div class="clearfix visible-sm visible-xs"></div>
      <section class="col-md-2 col-md-offset-1 col-sm-5 col-sm-offset-1 col-xs-5 col-xs-offset-1">
        <h3>About</h3>
        <ul>
          <li><a href="https://www.californiacivicdata.org/about/">Our story</a></li>
          <li><a href="https://www.californiacivicdata.org/about/#team">The team</a></li>
          <li><a href="https://www.californiacivicdata.org/about/#events">Events</a></li>
          <li><a href="https://www.californiacivicdata.org/about/#what-others-are-saying">What others are saying</a></li>
        </ul>
      </section>
      <section class="col-md-2 col-md-offset-1 col-sm-5 col-sm-offset-1 col-xs-4 col-xs-offset-2">
        <h3>Contact</h3>
        <ul>
          <li><a href="mailto:cacivicdata@gmail.com">E-mail</a></li>
          <li><a href="https://github.com/california-civic-data-coalition">GitHub</a></li>
          <li><a href="https://newsnerdery.slack.com/archives/C0H8Y2QBD">Slack</a></li>
        </ul>
      </section>
    </div>
    <section class="row xs-left">
      <p>
        &copy; <span class="easteregg"><a href="https://www.youtube.com/watch?v=wPsA3TsK1Uk">2016 'til infinity</a></span>
        <span><a href="https://www.californiacivicdata.org/">California Civic Data Coalition</a>.</span>
        <span><span class="easteregg"><a href="https://en.wikipedia.org/wiki/Gratis_versus_libre">Gratis, libre and fermented</a></span> on <a href="https://github.com/california-civic-data-coalition/">GitHub</a>.</span>
        <span class="easteregg"><a href="https://www.youtube.com/watch?v=wKgGXxoT5Ds">Westside right on time only thing fosho</a>.</span>
      </p>
    </section>
  </nav>
</footer>

</body>
</html>
